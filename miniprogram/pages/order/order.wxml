<!--miniprogram/pages/order/order.wxml-->
<wxs src="../../utils/filter.wxs" module="filters"/>

<view class="detailHeader">
  <image class="detailHeaderLImage" src="{{preOrder.productImage}}"></image>
  <text class="detailHeaderRText">{{preOrder.storeName}}</text>
</view>

<view class="detailItemBox">
  <view class="detailItem">
    <text class="detailItemKey">金额</text>
    <text class="detailItemValue">{{filters.toFixed(payAmount)}}</text>
  </view>

  <view class="detailItem">
    <text class="detailItemKey">折扣</text>
    <text class="detailItemValue">{{filters.toFixed(preOrder.realDiscount)}}</text>
  </view>

  <view class="detailItem">
    <text class="detailItemKey">本单已减</text>
    <text class="detailItemValue">{{preOrder.rebate}}</text>
  </view>

  <view class="detailItem">
    <text class="detailItemKey">应付</text>
    <text class="detailItemValue">{{preOrder.realAmount}}</text>
  </view>

  <view class="detailItem" bindtap="select">
    <text class="detailItemKey">优惠券</text>
    <text wx:if="{{couponSelected}}" class="detailItemValue">{{coupon.coupon.value/100}}</text>
    <text wx:else class="detailItemValue">点击选择</text>
  </view>
</view>

<view class="totalIncome">
  <text class="totalIncomeKey">合计待支付</text>
  <text class="totalIncomeValue">¥{{preOrder.totalAmount}}</text>
  <view class="totalIncomePayButton" bindtap="pay">立即支付</view>
</view>

<view class="popBox" animation="{{animation}}" style="visibility:{{show ? 'visible':'hidden'}}">
  <view class="popBoxHeader">
    <text class="popBoxHeaderL" bindtap="hidden">X</text>
    <text class="popBoxHeaderR">请输入支付密码</text>
  </view>

  <text class="popBoxLin1">{{preOrder.storeName}}</text>
  <text class="popBoxLin2">¥{{preOrder.totalAmount}}</text>
  <view class="popBoxLin3"></view>
  <view class="popBoxLin4">
    <text class="popBoxLin4L">支付方式</text>
    <text class="popBoxLin4R">余额</text>
    <view class="popBoxLin4Arrow"></view>
  </view>
  <view class="popBoxLin5">
    <passwordbox bind:change="inputChange"></passwordbox>
  </view>

</view>